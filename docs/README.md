# 📚 Minco BE API 文档中心

> **🎯 项目状态**: 核心功能已完成 ✅  
> **📅 最后更新**: 2024年12月  
> **🔒 安全更新**: 密码验证已加强（≥6字符）

欢迎使用 Minco BE API 文档！本文档中心包含了完整的接口说明、快速上手指南和最佳实践。

## 📑 文档导航

### 🚀 快速开始
- **[api_overview.md](./api_overview.md)** - **⭐ 推荐首读**
  - 📋 **内容**: 当前已实现的接口概览
  - 🎯 **适用**: 开发者快速上手和接口测试
  - ⏱️ **阅读时间**: 3分钟
  - ✅ **状态**: 实时同步，包含最新密码验证要求

### 📖 详细规格
- **[API接口文档.md](./API接口文档.md)** - 完整规格文档
  - 📋 **内容**: 全功能接口规格说明（计划实现）
  - 🎯 **适用**: 了解完整产品规划和未来功能
  - ⏱️ **阅读时间**: 30分钟
  - 📝 **状态**: 设计文档，包含P1/P2待实现功能

## 🎯 我想要...

### 💻 开发者快速入门
- **马上开始接口测试？** → 查看 **[api_overview.md](./api_overview.md)** ⭐
- **了解认证流程？** → 直接跳转到 [认证相关章节](./api_overview.md#🔐-认证相关)
- **查看完整数据字典？** → 查看 [数据字典章节](./api_overview.md#📊-数据字典)
- **前端集成示例？** → 查看 [前端集成示例](./api_overview.md#📱-前端集成示例)

### 🔍 产品经理/架构师
- **了解完整功能规划？** → 查看 **[API接口文档.md](./API接口文档.md)**
- **查看实现进度？** → 查看下方的 [功能实现状态](#📊-功能实现状态)

### 🧪 测试工程师
- **接口测试用例？** → 查看 [快速测试指南](./api_overview.md#🧪-快速测试指南)
- **在线交互测试？** → 访问 http://localhost:8000/docs (Swagger UI)

## 📊 功能实现状态

### ✅ 已完成 (P0 核心功能)
| 模块 | 接口数量 | 完成度 | 最新更新 |
|------|----------|---------|----------|
| 🔐 **用户认证** | 3个 | 100% | JWT Token增强 (完整字段) |
| 🔧 **系统测试** | 1个 | 100% | 连接测试稳定 |
| 📋 **事项管理** | 5个 | 100% | CRUD功能完整 |
| 🤖 **AI智能推荐** | 1个 | 100% | 推荐算法就绪 |
| 🎯 **专注功能** | 2个 | 100% | 番茄钟/自由模式 |
| 👤 **用户信息** | 1个 | 100% | 用户资料管理 |

**🎉 P0阶段**: **13个接口全部完成** (100%)

### ⏳ 计划中 (P1/P2 增强功能)
| 优先级 | 模块 | 接口数量 | 计划时间 |
|--------|------|----------|----------|
| P1 | 📂 项目管理 | 6个 | 待排期 |
| P1 | 🤖 AI增强功能 | 4个 | 待排期 |
| P1 | 📅 规划回顾 | 3个 | 待排期 |
| P2 | 🔄 批量操作 | 3个 | 待排期 |
| P2 | 📊 数据分析 | 2个 | 待排期 |
| P2 | ⚙️ 系统功能 | 1个 | 待排期 |

## 🛠️ 快速测试

### 🔗 一键连接测试
```bash
# 生产环境测试
curl -X POST "https://api.minco.app/api/v1/test/connect_test" \
     -H "Content-Type: application/json" \
     -d '{"uuid": "quick-test"}'

# 本地环境测试  
curl -X POST "http://localhost:8000/api/v1/test/connect_test" \
     -H "Content-Type: application/json" \
     -d '{"uuid": "local-test"}'
```

### 🔐 用户注册测试 (新增密码验证)
```bash
curl -X POST "https://api.minco.app/api/v1/auth/register" \
     -H "Content-Type: application/json" \
     -d '{
       "username": "demo_user",
       "email": "demo@example.com",
       "password": "password123",
       "full_name": "演示用户"
     }'
```

### 📝 创建事项测试
```bash
# 先登录获取 token，然后创建事项
curl -X POST "https://api.minco.app/api/v1/items" \
     -H "Authorization: Bearer <your_token_here>" \
     -H "Content-Type: application/json" \
     -d '{
       "title": "第一个事项",
       "category_id": 1,
       "priority": 3,
       "emoji": "📝"
     }'
```

## 🌍 环境地址

### 🏠 开发环境
- **API地址**: `http://localhost:8000/api/v1`
- **在线文档**: http://localhost:8000/docs
- **健康检查**: http://localhost:8000/health

### 🌐 生产环境
- **API地址**: `https://api.minco.app/api/v1`
- **状态**: 🟢 运行中
- **监控**: 已配置详细日志

## 🔧 接口特性

### 🔐 安全特性
- **JWT认证**: Bearer Token方式，包含完整认证字段
- **密码策略**: 最少6个字符，双重验证
- **请求日志**: 自动脱敏敏感信息
- **Token过期**: 30分钟自动过期
- **认证增强**: 修复401错误，Token包含 `iss`, `aud`, `jti`, `key` 等字段

### 📋 响应特性
- **统一格式**: `{code, message, data}` 结构
- **错误处理**: 详细错误信息和状态码
- **数据验证**: Pydantic字段验证
- **性能监控**: 请求耗时追踪

### 🔄 开发特性
- **实时日志**: 结构化JSON日志输出
- **请求追踪**: 唯一请求ID跟踪
- **自动文档**: Swagger UI界面
- **类型安全**: 完整的类型注解

## 📱 前端集成

### 🌟 推荐方式
1. **查看完整示例**: [前端集成示例](./api_overview.md#📱-前端集成示例)
2. **复制API客户端**: 使用提供的 `MincoAPI` 类
3. **处理认证**: 自动Token管理和刷新
4. **错误处理**: 统一的错误处理机制

### 🔑 认证流程
```javascript
// 1. 注册用户
const registerResult = await api.register({
    username: 'newuser',
    email: 'user@example.com', 
    password: 'password123', // ≥6字符
    full_name: '新用户'
});

// 2. 保存token（注册成功后自动返回）
localStorage.setItem('access_token', registerResult.data.access_token);

// 3. 使用已认证的接口
const tasks = await api.getTasks();
```

## 📋 数据格式

### 🏷️ 分类系统
- **生活** 🏠 (ID: 1) - 日常生活事务
- **健康** 💪 (ID: 2) - 运动健康相关  
- **工作** 💼 (ID: 3) - 工作任务项目
- **学习** 📚 (ID: 4) - 学习成长计划
- **放松** 😌 (ID: 5) - 休闲娱乐活动
- **探索** 🔍 (ID: 6) - 新鲜体验尝试

### 📊 状态管理
- **待处理** ⏳ (ID: 1) - 新创建的事项
- **进行中** 🔄 (ID: 2) - 正在执行的事项
- **已完成** ✅ (ID: 3) - 完成的事项
- **已取消** ❌ (ID: 4) - 取消的事项

### ⭐ 优先级
- **1** 🟢 最低优先级
- **2** 🟡 较低优先级  
- **3** 🟠 中等优先级
- **4** 🔴 较高优先级
- **5** 🔥 最高优先级

## ⚠️ 重要提醒

### 🔑 密码安全
- **最小长度**: 6个字符（新增验证）
- **验证层级**: 前端验证 + 后端双重验证
- **错误提示**: 明确的错误信息指导

### 🌐 URL格式
- ✅ **正确**: `https://api.minco.app/api/v1/接口路径`
- ❌ **错误**: `https://api.minco.app/v1/接口路径`
- 📝 **注意**: 必须包含 `/api` 前缀

### 🔐 Token管理
- **有效期**: 30分钟
- **存储**: 推荐localStorage存储
- **刷新**: Token过期需重新登录
- **安全**: 请求头使用Bearer方式

## 📞 技术支持

### 🐛 问题反馈
- **接口问题**: 查看详细错误日志
- **认证问题**: 检查Token格式和过期时间
- **数据问题**: 验证请求参数格式

### 📖 扩展阅读
- **Swagger文档**: http://localhost:8000/docs
- **代码仓库**: 查看最新实现状态
- **更新日志**: 关注文档更新时间

---

**📧 文档维护**: API文档与代码同步更新  
**🔄 更新频率**: 功能发布时实时更新  
**✅ 质量保证**: 所有示例代码均已验证  

*最后更新: 2024年12月 - 密码验证加强版本* 